import { h, Fragment } from 'preact';
import { useContext } from "preact/hooks";
import { PlayerContext } from '../../contexts/player-context';

const VolumeLow = () => (
  <path d="M27.0619694,21.4841633 C27.5701939,21.8429082 28.3026224,21.7382755 28.7360918,21.1403878 C29.9018367,19.570898 30.6043878,17.2690102 30.6043878,14.9222755 C30.6043878,12.5755408 29.9018367,10.2885918 28.7360918,8.70416327 C28.3026224,8.10627551 27.5851327,8.00164286 27.0619694,8.34541837 C26.4192347,8.79385714 26.3295714,9.55616327 26.8078878,10.198898 C27.6748265,11.3647959 28.1979898,13.1435204 28.1979898,14.9222755 C28.1979898,16.701 27.6449184,18.4797551 26.7929184,19.6605918 C26.3445102,20.3033265 26.4192347,21.0357551 27.0619694,21.4841633 Z" id="small"></path>
)

const VolumeMid = () => (
  <path d="M33.0261224,25.5199696 C33.6089796,25.9086018 34.3265306,25.7591278 34.745,25.1612327 C36.7179592,22.4109184 37.8689796,18.7488061 37.8689796,14.9222755 C37.8689796,11.0808061 36.7479592,7.40372449 34.745,4.66836735 C34.3115306,4.08541837 33.6089796,3.93593878 33.0261224,4.32459184 C32.4579592,4.71321429 32.3682653,5.44564286 32.8167347,6.08837755 C34.4459184,8.47995918 35.462551,11.6189082 35.462551,14.9222755 C35.462551,18.2256429 34.4609184,21.3945 32.8167347,23.7561796 C32.3832653,24.3989143 32.4579592,25.1313367 33.0261224,25.5199696 Z" id="mid"></path>
)

const VolumeFull = () => (
  <path d="M39.0496939,29.600602 C39.6028571,29.9742857 40.3354082,29.8248061 40.7688776,29.2119796 C43.5340816,25.3107061 45.1035714,20.2584796 45.1035714,14.9222755 C45.1035714,9.58607143 43.4890816,4.54879592 40.7688776,0.632571429 C40.3354082,0.0047755102 39.6028571,-0.144704082 39.0496939,0.24394898 C38.4818367,0.647510204 38.3921429,1.37993878 38.8256122,2.00773469 C41.2320408,5.55027551 42.7268367,10.0942653 42.7268367,14.9222755 C42.7268367,19.7502857 41.2920408,24.3690214 38.8256122,27.8368133 C38.3921429,28.4646061 38.4818367,29.1970408 39.0496939,29.600602 Z" id="full"></path>
)

const VolumeControl = (props) => {
  const { player } = useContext(PlayerContext);
  return (
    <div class="player-volume">
      <button class="player-button">
        <svg viewBox="0 0 46 30" version="1.1" xmlns="http://www.w3.org/2000/svg">
          { player.volume != 0 ?
            <path d="M18.8708061,28.6439724 C19.8872245,28.6439724 20.6196531,27.8966051 20.6196531,26.8951286 L20.6196531,3.05406122 C20.6196531,2.05258163 19.8872245,1.23045918 18.8409286,1.23045918 C18.1085,1.23045918 17.6152449,1.54435714 16.8230306,2.29172449 L10.2013265,8.52480612 C10.0966939,8.61446939 9.97712245,8.65931633 9.82764286,8.65931633 L5.35837755,8.65931633 C3.25078571,8.65931633 2.11479592,9.81027551 2.11479592,12.0673163 L2.11479592,17.8519592 C2.11479592,20.0940612 3.25078571,21.2450204 5.35837755,21.2450204 L9.82764286,21.2450204 C9.97712245,21.2450204 10.0966939,21.2898673 10.2013265,21.3795306 L16.8230306,27.6723918 C17.5404898,28.3450255 18.1384082,28.6439724 18.8708061,28.6439724 Z" id="speaker" fill-rule="nonzero"></path>
            :
            <path d="M30.9172024,2.72440638 C30.9172024,1.78049254 30.2127943,1.00562626 29.2266113,1.00562626 C28.5362832,1.00562626 28.0713808,1.30148115 27.3247035,2.00588929 L21.534442,7.47210691 C21.4499327,7.55664512 21.3653945,7.61299431 21.2667762,7.64118333 L20.6891465,7.66934349 L30.9172024,17.8973994 L30.9172024,2.72440638 Z M35.4395062,27.8295716 C35.8762485,28.252205 36.5665477,28.252205 36.9749855,27.8295716 C37.3976766,27.3928293 37.4118144,26.7165987 36.9749855,26.2939538 L12.8561186,2.17496572 C12.4334853,1.75230352 11.7290771,1.75230352 11.3064149,2.17496572 C10.8978617,2.58351898 10.8978617,3.30200721 11.3064149,3.71056047 L35.4395062,27.8295716 Z M16.5331269,19.8697365 L20.7314156,19.8697365 C20.872303,19.8697365 20.9991103,19.9120056 21.0836197,19.9965149 L27.3247035,25.9276581 C28.0009227,26.5616283 28.5644723,26.8433915 29.2547715,26.8433915 C29.9028304,26.8433915 30.4241109,26.5052762 30.6776967,26.0121876 C30.7340459,25.8853947 30.7903951,25.7445131 30.8326642,25.5895427 L14.1803967,8.93730124 C13.7154943,9.4444728 13.4759886,10.2193102 13.4759886,11.2195733 L13.4759886,16.6717108 C13.4759886,18.7849352 14.5467097,19.8697365 16.5331269,19.8697365 Z" id="mute" fill-rule="nonzero"></path>
          }
          { player.volume > 0 && <VolumeLow /> }
          { player.volume >= 0.4 && <VolumeMid /> }
          { player.volume >= 0.7 && <VolumeFull /> }
          </svg>
      </button>
      <div>
        <label for="volume-control" class="sr-only">Change Volume</label>
        <input
          type="range"
          onChange={props.onChange}
          min="0"
          max="1"
          step="0.01"
          defaultValue={player.volume}
          id="volume-control"
        />
      </div>
    </div>
  )
};

export default VolumeControl;
